# Ejercicio 3

Este proyecto crea un servidor utilizando Express que maneja diversas rutas para gestionar productos. A continuación, se detallan los pasos para levantar el servidor y probar las rutas utilizando Postman.

## Requisitos

- Node.js y npm (pueden ser descargаны [aquí](https://nodejs.org/))

## Instalación

1. **Clonar el repositorio o crear un nuevo proyecto:**

    ```bash
    mkdir my-project
    cd my-project
    ```

2. **Inicializar el proyecto con npm:**

    ```bash
    npm init -y
    ```

3. **Instalar Express:**

    ```bash
    npm install express
    ```

4. **Crear el archivo `ej3.js` y agregar el siguiente código:**

    ```javascript
    const express = require('express');
    const app = express();
    const port = 3000;

    app.use(express.json());

    let productos = [
      { id: 1, nombre: 'Taza de Harry Potter', precio: 300 },
      { id: 2, nombre: 'FIFA 22 PS5', precio: 1000 },
      { id: 3, nombre: 'Figura Goku Super Saiyan', precio: 100 },
      { id: 4, nombre: 'Zelda Breath of the Wild', precio: 200 },
      { id: 5, nombre: 'Skin Valorant', precio: 120 },
      { id: 6, nombre: 'Taza de Star Wars', precio: 220 }
    ];

    // Ruta para obtener la lista de productos
    app.get('/products', (req, res) => {
      res.json({
        description: 'Productos',
        items: productos
      });
    });

    // Ruta para crear un nuevo producto
    app.post('/products', (req, res) => {
      const nuevoProducto = req.body;
      productos.push(nuevoProducto);
      res.status(201).send('Producto creado');
    });

    // Ruta para actualizar un producto existente
    app.put('/products/:id', (req, res) => {
      const { id } = req.params;
      const productoActualizado = req.body;
      productos = productos.map(producto =>
        producto.id == id ? { ...producto, ...productoActualizado } : producto
      );
      res.send('Producto actualizado');
    });

    // Ruta para eliminar un producto
    app.delete('/products/:id', (req, res) => {
      const { id } = req.params;
      productos = productos.filter(producto => producto.id != id);
      res.send('Producto eliminado');
    });

    // Ruta para filtrar productos por precio exacto
    app.get('/products/precio/:precio', (req, res) => {
      const { precio } = req.params;
      const productosFiltrados = productos.filter(producto => producto.precio == precio);
      res.json(productosFiltrados);
    });

    // Ruta para filtrar productos por rango de precios
    app.get('/products/precio/rango/:min/:max', (req, res) => {
      const { min, max } = req.params;
      const productosFiltrados = productos.filter(producto => producto.precio >= min && producto.precio <= max);
      res.json(productosFiltrados);
    });

    // Ruta para obtener un producto por ID
    app.get('/products/id/:id', (req, res) => {
      const { id } = req.params;
      const producto = productos.find(producto => producto.id == id);
      res.json(producto);
    });

    // Ruta para obtener un producto por nombre
    app.get('/products/nombre/:nombre', (req, res) => {
      const { nombre } = req.params;
      const producto = productos.find(producto => producto.nombre.toLowerCase() === nombre.toLowerCase());
      res.json(producto);
    });

    app.listen(port, () => {
      console.log(`Servidor levantado en el puerto ${port}`);
    });
    ```

5. **Crear archivo `.gitignore` y agregar lo siguiente:**

    ```plaintext
    # Node.js
    node_modules/
    npm-debug.log
    yarn-error.log

    # Logs
    logs
    *.log
    npm-debug.log*
    yarn-debug.log*
    yarn-error.log*

    # Runtime data
    pids
    *.pid
    *.seed
    *.pid.lock

    # Directory for instrumented libs generated by jscoverage/JSCover
    lib-cov

    # Coverage directory used by tools like istanbul
    coverage
    *.lcov

    # nyc test coverage
    .nyc_output

    # Grunt intermediate storage (http://gruntjs.com/creating-plugins#storing-task-files)
    .grunt

    # Bower dependency directory (https://bower.io/)
    bower_components

    # node-waf configuration
    .lock-wscript

    # Compiled binary addons (http://nodejs.org/api/addons.html)
    build/Release

    # Dependency directories
    jspm_packages/

    # TypeScript v1 declaration files
    typings/

    # Optional npm cache directory
    .npm

    # Optional eslint cache
    .eslintcache

    # Optional REPL history
    .node_repl_history

    # dotenv environment variable files
    .env
    .env.test
    .env.production

    # PM2 PID files
    pids
    *.pid
    *.pid.lock

    # PM2 logs
    logs
    *.log
    ```

## Ejecución del Servidor

1. **Iniciar el servidor:**

    ```bash
    node ej3.js
    ```

2. **Verificar que el servidor está funcionando:**

    ![Servidor funcionando](https://github.com/VictoriaPashkouskaya/VictoriaPashkouskaya/blob/main/Captura%20de%20pantalla%202024-06-17%20155445.png)

## Uso de Postman para Probar las Rutas

1. **Abrir Postman y crear una nueva colección:**

    ![Nueva colección en Postman](https://github.com/VictoriaPashkouskaya/VictoriaPashkouskaya/blob/main/Captura%20de%20pantalla%202024-06-17%20155636.png)

2. **Agregar una nueva solicitud para obtener todos los productos:**
   
   - **Tipo de solicitud:** GET
   - **URL:** `http://localhost:3000/products`
   
    ![Solicitud GET todos los productos](https://github.com/VictoriaPashkouskaya/VictoriaPashkouskaya/blob/main/Captura%20de%20pantalla%202024-06-17%20160550.png)

3. **Agregar una nueva solicitud para crear un nuevo producto:**
   
   - **Tipo de solicitud:** POST
   - **URL:** `http://localhost:3000/products`
   - **Body:** 
     ```json
     {
       "id": 7,
       "nombre": "Nuevo Producto",
       "precio": 500
     }
     ```
   
    ![Solicitud POST crear producto](https://github.com/VictoriaPashkouskaya/VictoriaPashkouskaya/blob/main/Captura%20de%20pantalla%202024-06-17%20160805.png)

4. **Agregar una nueva solicitud para actualizar un producto:**
   
   - **Tipo de solicitud:** PUT
   - **URL:** `http://localhost:3000/products/7`
   - **Body:** 
     ```json
     {
       "nombre": "Producto Actualizado",
       "precio": 550
     }
     ```
   
    ![Solicitud PUT actualizar producto](https://github.com/VictoriaPashkouskaya/VictoriaPashkouskaya/blob/main/Captura%20de%20pantalla%202024-06-17%20161137.png)

5. **Agregar una nueva solicitud para eliminar un producto:**
   
   - **Tipo de solicitud:** DELETE
   - **URL:** `http://localhost:3000/products/7`
   
    ![Solicitud DELETE eliminar producto](https://github.com/VictoriaPashkouskaya/VictoriaPashkouskaya/blob/main/Captura%20de%20pantalla%202024-06-17%20161454.png)

6. **Agregar una nueva solicitud para filtrar productos por precio exacto:**
   
   - **Tipo de solicitud:** GET
   - **URL:** `http://localhost:3000/products/precio/200`
   
    ![Solicitud GET filtrar por precio](https://github.com/VictoriaPashkouskaya/VictoriaPashkouskaya/blob/main/Captura%20de%20pantalla%202024-06-17%20161637.png)

7. **Agregar una nueva solicitud para filtrar productos por rango de precios:**
   
   - **Tipo de solicitud:** GET
   - **URL:** `http://localhost:3000/products/precio/rango/50/250`
   
    ![Solicitud GET filtrar por rango de precios](https://github.com/VictoriaPashkouskaya/VictoriaPashkouskaya/blob/main/Captura%20de%20pantalla%202024-06-17%20161822.png)

8. **Agregar una nueva solicitud para obtener un producto por ID:**
   
   - **Tipo de solicitud:** GET
   - **URL:** `http://localhost:3000/products/id/1`
   
    ![Solicitud GET obtener por ID](path/to/your/screenshot.png)

9. **Agregar una nueva solicitud para obtener un producto por nombre:**
   
   - **Tipo de solicitud:** GET
   - **URL:** `http://localhost:3000/products/nombre/Taza de Harry Potter`
   
    ![Solicitud GET obtener por nombre](path/to/your/screenshot.png)

## Conclusión

Siguiendo estos pasos, habrás creado y probado un servidor de Express que maneja varias rutas para gestionar productos. Puedes agregar más características o personalizar el servidor según tus necesidades.
